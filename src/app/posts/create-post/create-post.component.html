<mat-card>
  <mat-spinner *ngIf="isLoading"></mat-spinner>
  <form
    *ngIf="!isLoading"
    (submit)="createPost(f)"
    [formGroup]="form"
  >
      <mat-form-field>
          <input
            type="text"
            matInput
            formControlName="title"
            placeholder="Title"
          >
          <mat-error *ngIf="form.get('title').invalid"> invalid input </mat-error>
        </mat-form-field>
        <div>
          <button
              mat-stroked-button
              type="button"
              (click)="filePicker.click()"
            >Pick image</button>
          <input
              type="file"
              #filePicker
              (change)="onImagePicked($event)"
          >
        </div>
        <div
          class="image-preview"
          *ngIf="imagePreview !== '' && imagePreview && form.get('image').valid"
        >
          <img
            [src]="imagePreview"
            [alt]="form.value.title"
          >
        </div>
        <mat-form-field>
            <textarea
            rows="4"
            matInput
            formControlName="content"
            placeholder="Content"
          >
          </textarea>
          <mat-error *ngIf="form.get('content').invalid"> invalid input </mat-error>
        </mat-form-field>
        <button
          type="submit"
          mat-raised-button
          color="primary"
        >
        Save post
        </button>
  </form>
</mat-card>
